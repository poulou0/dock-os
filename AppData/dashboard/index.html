<!DOCTYPE html>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<style>
  .form-floating > textarea.form-control {
    font-family: monospace;
    height: 130px;
    width: calc(100vw - 10px);
    max-width: 600px;
    margin: 5px;
    resize: both;
  }
  .form-floating > textarea#docker-ps.form-control { height: 180px }
  .form-floating > textarea.form-control:not(:placeholder-shown) {
    padding-top: 2.2rem;
  }
</style>

<nav class="navbar navbar-light bg-light">
  <form class="container-fluid justify-content-start">
    <button class="btn btn-outline-success me-2" type="button" onclick="location.href='/minidlna-rescan';">
      MiniDLNA rescan
    </button>
    <button class="btn btn-outline-success me-2" id="pihole-enable" type="button" onclick="location.href='/pihole-enable';" style="display: none">
      Enable pihole
    </button>
    <button class="btn btn-outline-success me-2" id="pihole-disable" type="button" onclick="location.href='/pihole-disable';" style="display: none">
      Disable pihole
    </button>
  </form>
</nav>
<div class="form-floating">
  <textarea readonly class="form-control" id="df-h"></textarea>
  <label for="df-h">Disk usage</label>
</div>
<div class="form-floating">
  <textarea readonly class="form-control" id="docker-ps"></textarea>
  <label for="docker-ps">Docker containers</label>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script>
fetch('/docker-ps', {method: 'get'})
  .then(response => response.json())
  .then(function(response) {
    const textareaDockerPs = document.querySelector("#docker-ps");
    textareaDockerPs.innerHTML = response.result;
    textareaDockerPs.style.height = (textareaDockerPs.scrollHeight + 5) + 'px';
    document.querySelector("#pihole-" + (response.result.includes("pihole") ? "disable" : "enable")).style.display = "block";
  })
  .catch(function(err) {
    alert(err);
  });
fetch('/df-h', {method: 'get'})
  .then(response => response.json())
  .then(function(response) {
    document.querySelector("#df-h").innerHTML = response.result;
  })
  .catch(function(err) {
    alert(err);
  });
</script>
